<meta charset="utf-8"/>
<html>
	<head>
		<style type="text/css">
		
		.heatmap-wrapper {
			position: absolute;
			left: 0;
			top: 0;
			-webkit-transition: .3s ease all;
			-moz-transition: .3s ease all;
			transition: .3s ease all;
		}

		.heatmap {
			width: 100%;
			height: 100%;

		}
		

			.option {
				float:left;
				width:50%;
		  height:100%
			}

		.pictures::after {
		  content:"";
		  clear: both;
		  display: table;
		}
		
		 html,body{
			height:100%;
		}
		</style>

	</head>
	<body>
		<div class="heatmap-wrapper" style="width: 100%; height: 100%;">
			<div class="heatmap" style="position: absolute;">

				<canvas width="100%" height="100%" class="heatmap-canvas" style="z-index=2; opacity: 0; left: 0px; top: 0px; position: absolute;">
				</canvas>
				<div class="pictures" style="width:100%; height:100%; z-index=1;">
					<div class="option">
						<img src="makan.jpg" style="width:100%; height:100%; transform:rotate(90deg)">
					</div>
					<div class="option">
						<img src="minum.jpg" style="width:100%; height:100%; transform:rotate(90deg)">
					</div>
				</div>
			</div>
		</div>
		<script src="heatmap.js"></script>
		<script>
		
		window.requestAnimationFrame = (function(){
          return  window.requestAnimationFrame       ||
                  window.webkitRequestAnimationFrame ||
                  window.mozRequestAnimationFrame    ||
                  function( callback ){
                    window.setTimeout(callback, 1000 / 60);
                  };
        })();
		//var thisCanvas = document.getElementById("heatmap-canvas");
		//var canvasWidth = thisCanvas.offsetWidth;
		//var canvasHeight = thisCanvas.offsetHeight;
		var timesLeft = 0;
		var timesRight = 0;
		// create instance
        var body = document.body;
        var bodyStyle = getComputedStyle(body);
        var hmEl = document.querySelector('.heatmap-wrapper');

        hmEl.style.width = bodyStyle.width;
        hmEl.style.height = bodyStyle.height;

        var hm = document.querySelector('.heatmap');

        var heatmap = h337.create({
		
          container: hm,
          radius: 60,
        });


        var trackData = false;

        setInterval(function() {
          trackData = true;
        }, 50);

        var idleTimeout, idleInterval;

        var lastX, lastY;
        var idleCount;

        function startIdle() {
          idleCount = 0;
          function idle() {
            heatmap.addData({
              x: lastX,
              y: lastY
            });
            idleCount++;
            if (idleCount > 10) {
              clearInterval(idleInterval);
            }
          };
          idle();
		  //if(lastX <  
          idleInterval = setInterval(idle, 1000);
        };



        body.onmousemove = function(ev) {
          if (idleTimeout) clearTimeout(idleTimeout);
          if (idleInterval) clearInterval(idleInterval);

          if (trackData) {
            lastX = ev.pageX;
            lastY = ev.pageY;
            heatmap.addData({
              x: lastX,
              y: lastY
            });
            trackData = false;
          }
          idleTimeout = setTimeout(startIdle, 500);
        };
		</script>
	</body>
</html>